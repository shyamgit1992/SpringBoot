<!DOCTYPE HTML>

<html  xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>Dealer Sell Bill Items Details</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="Kim Maida">

  <!-- JS Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.min.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.6/ui-bootstrap.js" type="text/javascript"></script>

  <!-- Angular Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

</head>

<body ng-app="myApp">
<div class="container-fluid">
<div align="center">
    <h1>Dealer Sell Bill Items List</h1>
    <label>Dealer Id:</label><a><span id="ids" th:text="${ds.id}"></span></a>
    <label>Invoice Number:</label><a><span id="Invoiceids" th:text="${dfb.id}"></span></a>
    <label>Name:</label><a><span th:text="${ds.fullName}"></span></a>
</div>    
   <hr>
		<div class="col-md-12" ng-controller="PageCtrl as list">
			
			
            <!-- <div class="input-group">
				<input type="search" class="form-control"  ng-model="search.fullName" placeholder="Enter your search name" />
			    <span class="input-group-addon">
                <span class="glyphicon glyphicon-search"></span> </span>
			</div> -->
			</br>
			<input type="button" value="Add Dealer Sell Bills"
				th:onclick="'window.location.href = \'' + @{/firmSell/firmSellBill/{id}(id=${ds.id})} + '\''"
				class="btn btn-primary" />
			<input type="button" value="Back To Dealers Sell Bill"
			th:onclick="'window.location.href = \'' + @{/firmSell/dealerSellBillss/{id}(id=${ds.id})} + '\''"
				class="btn btn-primary" />	
			<input type="button" value="Edit Dealer Sell Bill"
			th:onclick="'window.location.href = \'' + @{/firmSell/editFirmBill/{DealerId}/bill/{invoiceNo}(DealerId=${ds.id},invoiceNo=${dfb.id})} + '\''"
				class="btn btn-primary" />	
			<input type="button" value="Print Dealer Sell Bill"
			th:onclick="'window.location.href = \'' + @{/firmSell/printFirmBill/{DealerId}/bill/{invoiceNo}(DealerId=${ds.id},invoiceNo=${dfb.id})} + '\''"
				class="btn btn-primary" />			
				<!-- onclick="window.location.href='/cust/customersBillss/1'; return false;" -->
				
				<br/><br/>
			<div><label>Total number of Dealer Sell Bill Items: </label> <span th:text="${count_count_DealerItemBill}"></span></div>	
			<div class="panel panel-info">
				<div class="panel-heading">
					<div class="panel-title">Dealer Sell Bill Items List</div>
				</div>
				<div class="panel-body">
					<table class="table table-hover table-striped table-bordered">
					<tr>
				
	
					<th scope="col">Product id</th>
					<th scope="col">No.</th>
					<th scope="col">name</th>
					<th scope="col">Description</th>
					<th scope="col">Quantity</th>
					<th scope="col">Unit</th>
					<th scope="col">Per Unit Price</th>
					<th scope="col">No. Of Item</th>
					<th scope="col">Cut</th>
					<th scope="col">Other Cut</th>
					<th scope="col">Qty. After Cut</th>
					<th scope="col">Amount</th>
					
					</tr>
					<tr ng-repeat="d in items.firmSellBillItem | orderBy:'proId'">
					<td>{{d.id}}</td>
					<td>{{d.proId}}</td>
					<td>{{d.name}}</td>
					<td>{{d.description}}</td>
					<td>{{d.qty}}</td>
					<td>{{d.unit}}</td>
					<td>{{d.price | currency:"&#8377;"}}</td>
					<td>{{d.itemno}}</td>
					<td>{{d.cut}}</td>
					<td>{{d.otherCut}}</td>
					<td>{{d.qtyCut}}</td>
					<td>{{d.amount | currency:"&#8377;"}}</td>
					</tr>
					</table>
                    
           
               
				</div>
			</div>
		</div>

	</div>
</body>
<script type="text/javascript">
var app = angular.module('myApp', ['ui.bootstrap']);

app.controller('PageCtrl', ['$scope', 'filterFilter', '$http', function ($scope, filterFilter, $http) {
	var id = document.getElementById("ids").innerText;
	var Invoiceid = document.getElementById("Invoiceids").innerText;
	$scope.DealerId = id;
	$scope.InvoiceId = Invoiceid;
	$http.get("http://localhost:8083/firmSell/DealerViewFirmBill/"+$scope.DealerId+"/bill/"+$scope.InvoiceId+"").then(function(data, status, headers, config) {
		$scope.items = data.data;
		console.log($scope.items);
	});
}]);
</script>
</html>