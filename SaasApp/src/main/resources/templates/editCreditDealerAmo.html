<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>EditCreditDealerAmo</title>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"  rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css"  rel="stylesheet">
<link href = "https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css" rel = "stylesheet">
<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular.min.js"></script>
<script src="http://code.angularjs.org/1.2.0rc1/angular-route.js"></script>

<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
<script src = "https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
<script src = "https://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
</head>
<body data-ng-app="invoice" data-ng-controller="InvoiceController">
<input type="button" value="Back To Dealer Credit List"
			th:onclick="'window.location.href = \'' + @{/creditDealerAmo/getCreditDealerAmoView/{id}(id=${ds.id})} + '\''"
				class="btn btn-primary" />
				<br><br>
<div align="center">
    <h1>Edit Credit Dealer Amount</h1>
    <label>Id:</label><a id="ids"><span th:text="${ds.id}"></span></a>
    <label>Credit Id:</label><a id="creditDealerAmoids"><span th:text="${cr}"></span></a>
    <label>Name:</label><a><span th:text="${ds.fullName}"></span></a>
   <hr>
    <form name="myForm">
        
       <!--  <label>Id:</label>
        <input type="number" th:field="*{id}" /><br/> -->
         
        <label>Credit Amount:</label>
        <input type="number"  data-ng-model="creditAmount" /><br/>
 
        <label>Status:</label>
        <input type="text"  data-ng-model="status"/><br/>
        
        <label>Note:</label>
        <input type="text"  data-ng-model="note"/><br/>
        
        <button type="submit" data-ng-click="Credit()">Update Dealer Credit Amount</button>    
    </form>
    
</div>
</body>
<script type="text/javascript">
var invoice = angular.module('invoice', []);
invoice.controller('InvoiceController', function($scope,$window,$http,$timeout){
	$scope.Credit = function(){
		var id = document.getElementById("ids").innerText;
		var did = document.getElementById("creditDealerAmoids").innerText;
		var data={
				"creditAmount" : $scope.creditAmount,
				"status" : $scope.status,
				"note" : $scope.note,
				};
		console.log("Data ::");
		console.log(data);
		$scope.DealerId = id;
		$scope.CreditDealerAmoId = did;
		var URL = "http://localhost:8083/creditDealerAmo/updateCreditDealerAmo/"+$scope.DealerId+"/cr/"+$scope.CreditDealerAmoId+"";
		$http.post(URL, data); 
		$window.location.href = "/creditDealerAmo/getCreditDealerAmoView/"+$scope.DealerId+"";
	}
	var id = document.getElementById("creditDealerAmoids").innerText;
	$scope.CreditDealerAmoId = id;
	 $http.get("http://localhost:8083/creditDealerAmo/GetCreditDealerAmo/cr/"+$scope.CreditDealerAmoId+"").then(function(data, status, headers, config) {
		$scope.items = data.data;
		console.log($scope.items);
		console.log($scope.items.creditAmount);
		$scope.creditAmount = parseFloat($scope.items.creditAmount);
		$scope.status = $scope.items.status;
		$scope.note = $scope.items.note;
		}); 
});
</script>
</html>